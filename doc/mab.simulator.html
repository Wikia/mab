<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>mab.simulator documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Mab 0.2.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="mab.algorithms.epsilon-greedy.html"><span>mab.algorithms.epsilon-greedy</span></a></li><li><a href="mab.algorithms.random.html"><span>mab.algorithms.random</span></a></li><li><a href="mab.algorithms.ucb1.html"><span>mab.algorithms.ucb1</span></a></li><li><a href="mab.arm.html"><span>mab.arm</span></a></li><li><a href="mab.core.html"><span>mab.core</span></a></li><li><a href="mab.repl-helper.html"><span>mab.repl-helper</span></a></li><li class="current"><a href="mab.simulator.html"><span>mab.simulator</span></a></li><li><a href="mab.util.html"><span>mab.util</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="mab.simulator.html#var-add-columns"><span>add-columns</span></a></li><li><a href="mab.simulator.html#var-best-mean-index"><span>best-mean-index</span></a></li><li><a href="mab.simulator.html#var-chosen"><span>chosen</span></a></li><li><a href="mab.simulator.html#var-create-bandit"><span>create-bandit</span></a></li><li><a href="mab.simulator.html#var-create-bernoulli-arm"><span>create-bernoulli-arm</span></a></li><li><a href="mab.simulator.html#var-create-result"><span>create-result</span></a></li><li><a href="mab.simulator.html#var-cumulative-reward"><span>cumulative-reward</span></a></li><li><a href="mab.simulator.html#var-draw-bernoulli-arm"><span>draw-bernoulli-arm</span></a></li><li><a href="mab.simulator.html#var-extract-columns"><span>extract-columns</span></a></li><li><a href="mab.simulator.html#var-inc-t"><span>inc-t</span></a></li><li><a href="mab.simulator.html#var-repeatedly-simulate-seq"><span>repeatedly-simulate-seq</span></a></li><li><a href="mab.simulator.html#var-reward"><span>reward</span></a></li><li><a href="mab.simulator.html#var-sim-num"><span>sim-num</span></a></li><li><a href="mab.simulator.html#var-simulate"><span>simulate</span></a></li><li><a href="mab.simulator.html#var-simulation-seq"><span>simulation-seq</span></a></li><li><a href="mab.simulator.html#var-simulation-seq-%3Etable"><span>simulation-seq-&gt;table</span></a></li><li><a href="mab.simulator.html#var-t"><span>t</span></a></li><li><a href="mab.simulator.html#var-update-chosen"><span>update-chosen</span></a></li><li><a href="mab.simulator.html#var-update-cumulative-reward"><span>update-cumulative-reward</span></a></li><li><a href="mab.simulator.html#var-update-reward"><span>update-reward</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>mab.simulator documentation</h2><pre class="doc"></pre><div class="public" id="var-add-columns"><h3>add-columns</h3><div class="usage"><code>(add-columns s cols)</code></div><pre class="doc">Add cols to s by prepending them onto the front. Maintains the order of cols.
</pre></div><div class="public" id="var-best-mean-index"><h3>best-mean-index</h3><div class="usage"><code>(best-mean-index means)</code></div><pre class="doc">Find the &quot;best&quot; arm or the arm with the highest p. For use with seq of means.
</pre></div><div class="public" id="var-chosen"><h3>chosen</h3><div class="usage"><code>(chosen r)</code></div><pre class="doc">Get the arm chosen from a result.
</pre></div><div class="public" id="var-create-bandit"><h3>create-bandit</h3><div class="usage"><code>(create-bandit means)</code></div><pre class="doc">Given a seq of reward probabilities, create a Bernoulli arm for each.
</pre></div><div class="public" id="var-create-bernoulli-arm"><h3>create-bernoulli-arm</h3><div class="usage"><code>(create-bernoulli-arm p)</code></div><pre class="doc">Creates a Bernoulli arm that will reward 1 with probability p.
</pre></div><div class="public" id="var-create-result"><h3>create-result</h3><div class="usage"><code>(create-result sim-num)</code></div><pre class="doc">Create a result. :t and :cumulative-reward are initialzed to 0.
</pre></div><div class="public" id="var-cumulative-reward"><h3>cumulative-reward</h3><div class="usage"><code>(cumulative-reward r)</code></div><pre class="doc">Get the cumulative reward from a result.
</pre></div><div class="public" id="var-draw-bernoulli-arm"><h3>draw-bernoulli-arm</h3><div class="usage"><code>(draw-bernoulli-arm a)</code></div><pre class="doc">Draw a Bernoulli arm.
</pre></div><div class="public" id="var-extract-columns"><h3>extract-columns</h3><div class="usage"><code>(extract-columns r)</code></div><pre class="doc">Extract the columns required for analysis from a simulation. This includes:
  * time t
  * chosen arm
  * reward at time t
  * cumulative reward at time t

Returs a seq mainly because we expect to prepend columns later for reporting.
</pre></div><div class="public" id="var-inc-t"><h3>inc-t</h3><div class="usage"><code>(inc-t r)</code></div><pre class="doc">Increment t in a result.
</pre></div><div class="public" id="var-repeatedly-simulate-seq"><h3>repeatedly-simulate-seq</h3><div class="usage"><code>(repeatedly-simulate-seq bandit select update arms horizon iterations)</code></div><pre class="doc">Repeatedly run a given simulation. This allows for easy averaging the results 
over multiple runs.

(repeatedly-simulate-seq bandit 
                (partial eg/select-arm 0.1) 
                eg/update-arm 
                (initialize-arm-map (count mean-sample-space))
                250 1000)

[...250]
...
1000

</pre></div><div class="public" id="var-reward"><h3>reward</h3><div class="usage"><code>(reward r)</code></div><pre class="doc">Get the reward from a result.
</pre></div><div class="public" id="var-sim-num"><h3>sim-num</h3><div class="usage"><code>(sim-num r)</code></div><pre class="doc">Get the simulation number.
</pre></div><div class="public" id="var-simulate"><h3>simulate</h3><div class="usage"><code>(simulate bandit select update {:keys [arms results]})</code></div><pre class="doc">Simulate the pull of an arm. Given the bandit an algorithm selection function 
and update function updates the arms and the result hash with the results of a single draw.

bandit: seq of Bernoulli arms
select: should be of the form (select arms)
update: of the form (update arms pos reward)
hashmap: {:arms seq of arms created with mab.arms/create-arm
          :results initialized with (create-result sim-num)}

</pre></div><div class="public" id="var-simulation-seq"><h3>simulation-seq</h3><div class="usage"><code>(simulation-seq bandit select update arms sim-num)</code></div><pre class="doc">Generates a lazy sequence of simulations. See simulate above for descriptions of
bandit, select and update. Arms is a seq of arms created by mab.arms/create-arm.

(:require [mab.algorithms.epsilon-greedy :as eg]))
...
(def mean-sample-space (shuffle [0.1 0.1 0.1 0.1 0.9])) 
(def bandit (create-bandit mean-sample-space)) 

(take 1000 
        (simulation-seq bandit 
                        (partial eg/select-arm 0.1) 
                        update-arm 
                        (initialize-arm-map (count mean-sample-space)
                        sim-num))))

</pre></div><div class="public" id="var-simulation-seq-%3Etable"><h3>simulation-seq-&gt;table</h3><div class="usage"><code>(simulation-seq-&gt;table s &amp; [params])</code></div><pre class="doc">Given a simulation seq, extract the columns for analysis from eath simulation. Prepends params
onto the extracted columns (see extract-columns).

Simulations are tabular. See repeatedly-simulate-seq.

To organize them, we want to add a column heading (e.g. epsilon) and the simulation number so 
that results can be averaged over simulations using R. And then finnaly, we want to combine them all 
into one table space for easy consumption.

</pre></div><div class="public" id="var-t"><h3>t</h3><div class="usage"><code>(t r)</code></div><pre class="doc">Get t from a result.
</pre></div><div class="public" id="var-update-chosen"><h3>update-chosen</h3><div class="usage"><code>(update-chosen r pos)</code></div><pre class="doc">Update the chosen position.
</pre></div><div class="public" id="var-update-cumulative-reward"><h3>update-cumulative-reward</h3><div class="usage"><code>(update-cumulative-reward r reward)</code></div><pre class="doc">Update the cumulative reward. Adds reward to the current reward.
</pre></div><div class="public" id="var-update-reward"><h3>update-reward</h3><div class="usage"><code>(update-reward r reward)</code></div><pre class="doc">Update the reward.
</pre></div></div></body></html>